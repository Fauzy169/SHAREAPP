const CACHE_NAME="StoryApp-V2",ASSETS_TO_CACHE=["/SHAREAPP/","/SHAREAPP/index.html","/SHAREAPP/favicon.png","/SHAREAPP/manifest.json","/SHAREAPP/app.bundle.js","/SHAREAPP/sw.bundle.js","/SHAREAPP/icons/icon-192.png","/SHAREAPP/icons/icon-512.png","https://unpkg.com/leaflet@1.9.4/dist/leaflet.css","https://unpkg.com/leaflet@1.9.4/dist/leaflet.js","https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"];self.addEventListener("install",(e=>{e.waitUntil(caches.open(CACHE_NAME).then((e=>e.addAll(ASSETS_TO_CACHE))).catch((e=>{console.error("Cache error:",e)})))})),self.addEventListener("fetch",(e=>{e.respondWith(caches.match(e.request).then((t=>t||fetch(e.request).catch((()=>{if("navigate"===e.request.mode)return caches.match("/SHAREAPP/index.html")})))))})),self.addEventListener("activate",(e=>{e.waitUntil(caches.keys().then((e=>Promise.all(e.filter((e=>e!==CACHE_NAME)).map((e=>caches.delete(e)))))))})),self.addEventListener("push",(e=>{const t=e.data?.json()||{title:"New Story",body:"A new story has been posted!"};e.waitUntil(self.registration.showNotification(t.title,{body:t.body,icon:"/SHAREAPP/icons/icon-192.png",vibrate:[200,100,200]}))}));